<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="Beckhoff Automation GmbH" productName="TwinCAT PLC Control" productVersion="3.5.13.20" creationDateTime="2020-03-31T15:44:23.6339566" />
  <contentHeader name="Aufgabe2SPS" modificationDateTime="2020-03-31T15:44:23.6389422">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous />
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/application" handleUnknown="implementation">
      <resource name="Aufgabe2SPS">
        <task name="PlcTask" interval="PT0S" priority="20">
          <pouInstance name="MAIN" typeName="">
            <documentation>
              <xhtml xmlns="http://www.w3.org/1999/xhtml" />
            </documentation>
          </pouInstance>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
              <TaskSettings KindOfTask="Cyclic" Interval="10000" IntervalUnit="us">
                <Watchdog Enabled="false" TimeUnit="ms" />
              </TaskSettings>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>b3b2532a-3bf1-487c-8bf0-864602a6006f</ObjectId>
            </data>
          </addData>
        </task>
        <globalVars name="GVL_Constants" constant="true">
          <variable name="r_TaskTime">
            <type>
              <REAL />
            </type>
            <initialValue>
              <simpleValue value="0.01" />
            </initialValue>
            <documentation>
              <xhtml xmlns="http://www.w3.org/1999/xhtml"> Taskzeit 10 (ms)</xhtml>
            </documentation>
          </variable>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="qualified_only" Value="" />
              </Attributes>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/buildproperties" handleUnknown="implementation">
              <BuildProperties>
                <LinkAlways>true</LinkAlways>
              </BuildProperties>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
              <InterfaceAsPlainText>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">{attribute 'qualified_only'}
VAR_GLOBAL CONSTANT
	// Taskzeit 10 (ms)
	r_TaskTime : REAL := 0.01;
END_VAR</xhtml>
              </InterfaceAsPlainText>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>6a4b177b-49b8-4779-aaf4-3ef6865ef486</ObjectId>
            </data>
          </addData>
        </globalVars>
        <globalVars name="GVL_IO">
          <variable name="intUltrasonicSensor" address="%I*">
            <type>
              <INT />
            </type>
          </variable>
          <variable name="voltageUltrasonicSensor">
            <type>
              <REAL />
            </type>
          </variable>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="qualified_only" Value="" />
              </Attributes>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/buildproperties" handleUnknown="implementation">
              <BuildProperties>
                <LinkAlways>true</LinkAlways>
              </BuildProperties>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
              <InterfaceAsPlainText>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">{attribute 'qualified_only'}
VAR_GLOBAL
	intUltrasonicSensor AT %I* : INT;
	voltageUltrasonicSensor : REAL;
END_VAR</xhtml>
              </InterfaceAsPlainText>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>815b5ac3-0bfd-45a5-ac0e-b78d968081d8</ObjectId>
            </data>
          </addData>
        </globalVars>
        <globalVars name="GVL_general">
          <variable name="bufferArray">
            <type>
              <array>
                <dimension lower="1" upper="100" />
                <baseType>
                  <REAL />
                </baseType>
              </array>
            </type>
          </variable>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
              <Attributes>
                <Attribute Name="qualified_only" Value="" />
              </Attributes>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/buildproperties" handleUnknown="implementation">
              <BuildProperties>
                <LinkAlways>true</LinkAlways>
              </BuildProperties>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
              <InterfaceAsPlainText>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">{attribute 'qualified_only'}
VAR_GLOBAL
	
	bufferArray : ARRAY[1..100] OF  REAL;
END_VAR</xhtml>
              </InterfaceAsPlainText>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>fdd4f0a5-029c-4650-8621-f314396a62ea</ObjectId>
            </data>
          </addData>
        </globalVars>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="ST_STATUS_WORD_DATA">
              <baseType>
                <struct>
                  <variable name="inLenght">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="overrunError">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="framingError">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="parityError">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="bufferFull">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="initAccepted">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="receiveRequest">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="transmitAccepted">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </struct>
              </baseType>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">TYPE ST_STATUS_WORD_DATA :
STRUCT
	inLenght : INT;
   overrunError  :  BOOL;
   framingError  :  BOOL;
   parityError  :  BOOL;
   bufferFull  :  BOOL;
   initAccepted  :  BOOL;
   receiveRequest  :  BOOL;
   transmitAccepted  :  BOOL;		

END_STRUCT
END_TYPE
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>6100a887-595c-4253-889a-be2e97bedc30</ObjectId>
                </data>
              </addData>
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="ST_CurrentStatus">
              <baseType>
                <struct>
                  <variable name="buttonYellow">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="buttonBlue">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </struct>
              </baseType>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">TYPE ST_CurrentStatus :
STRUCT
	buttonYellow : BOOL;
	buttonBlue : BOOL;
	// usw...
END_STRUCT
END_TYPE
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>0c26ce45-48b3-45dd-9f3e-d64ca69228fa</ObjectId>
                </data>
              </addData>
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_EdgeDetector" pouType="functionBlock">
              <interface>
                <inputVars>
                  <variable name="b_InputSignal_k">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </inputVars>
                <outputVars>
                  <variable name="b_PositiveEdge">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="b_NegativeEdge">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </outputVars>
                <localVars>
                  <variable name="b_InputSignal_k_1">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">b_PositiveEdge := b_InputSignal_k AND NOT b_InputSignal_k_1;
b_NegativeEdge := NOT b_InputSignal_k AND b_InputSignal_k_1;

b_InputSignal_k_1 := b_InputSignal_k;</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION_BLOCK FB_EdgeDetector
VAR_INPUT
	b_InputSignal_k : BOOL;
END_VAR
VAR_OUTPUT
	b_PositiveEdge : BOOL;
	b_NegativeEdge : BOOL;
END_VAR
VAR
	b_InputSignal_k_1 : BOOL;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>c7b5231f-e8d0-4d6a-9062-0fbf4479b8b4</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="F_AdditionFunction" pouType="function">
              <interface>
                <returnType>
                  <INT />
                </returnType>
                <inputVars>
                  <variable name="i_var1">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_var2">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">F_AdditionFunction := i_var1 + i_var2;</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION F_AdditionFunction : INT
VAR_INPUT
	i_var1 : INT;
	i_var2 : INT;
END_VAR
VAR
	
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>309f8455-b043-43fc-a577-86461ee6c392</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="F_DivisionFunction" pouType="function">
              <interface>
                <returnType>
                  <INT />
                </returnType>
                <inputVars>
                  <variable name="i_var1">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_var2">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF i_var2 = 0 THEN
	F_DivisionFunction := 0;
ELSE	
	F_DivisionFunction := i_var1 / i_var2;
END_IF
</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION F_DivisionFunction : INT
VAR_INPUT
	i_var1 : INT;
	i_var2 : INT;
END_VAR
VAR
	
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>b8f8b2c8-b15f-456f-90ce-adb05caeb8ca</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="F_STATUS_WORD_PROC" pouType="function">
              <interface>
                <returnType>
                  <derived name="ST_STATUS_WORD_DATA" />
                </returnType>
                <inputVars>
                  <variable name="w_StatusWord">
                    <type>
                      <WORD />
                    </type>
                  </variable>
                </inputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">

F_STATUS_WORD_PROC.transmitAccepted := w_StatusWord.0;
F_STATUS_WORD_PROC.parityError := w_StatusWord.1;
F_STATUS_WORD_PROC.initAccepted := w_StatusWord.2;
F_STATUS_WORD_PROC.bufferFull := w_StatusWord.3;
F_STATUS_WORD_PROC.parityError := w_StatusWord.4;
F_STATUS_WORD_PROC.framingError := w_StatusWord.5;
F_STATUS_WORD_PROC.overrunError := w_StatusWord.6;
F_STATUS_WORD_PROC.inLenght := WORD_TO_INT(SHR(w_StatusWord,8));</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION F_STATUS_WORD_PROC : ST_STATUS_WORD_DATA
VAR_INPUT
	w_StatusWord : WORD;
END_VAR
VAR
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>2e7e933b-dbe1-4158-8997-44b75cd3bed0</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="MAIN" pouType="program">
              <interface>
                <localVars>
                  <variable name="i_var1">
                    <type>
                      <INT />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Lokale Variablen um die Funktionen
 F_AdditionFunction und F_DivisionFunction zu testen</xhtml>
                    </documentation>
                  </variable>
                  <variable name="i_var2">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_addRes">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_divRes">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="w_myword">
                    <type>
                      <WORD />
                    </type>
                    <initialValue>
                      <simpleValue value="16#5D7A" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 16 bits</xhtml>
                    </documentation>
                  </variable>
                  <variable name="w_divRes">
                    <type>
                      <WORD />
                    </type>
                  </variable>
                  <variable name="dw_mydword">
                    <type>
                      <DWORD />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 32 bits</xhtml>
                    </documentation>
                  </variable>
                  <variable name="dw_mydword1">
                    <type>
                      <DWORD />
                    </type>
                  </variable>
                  <variable name="w_testWord">
                    <type>
                      <WORD />
                    </type>
                  </variable>
                  <variable name="st_resRsProt">
                    <type>
                      <derived name="ST_STATUS_WORD_DATA" />
                    </type>
                  </variable>
                  <variable name="arr_r_testArray">
                    <type>
                      <array>
                        <dimension lower="1" upper="10" />
                        <baseType>
                          <REAL />
                        </baseType>
                      </array>
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Array von REAL, Dimension 10
 arr_r_testArray : ARRAY[0..9] OF REAL;</xhtml>
                    </documentation>
                  </variable>
                  <variable name="r_SummeArray">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Variablen für FOR Schleife</xhtml>
                    </documentation>
                  </variable>
                  <variable name="r_MulArray">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                  <variable name="i_SchleifeIterVar">
                    <type>
                      <INT />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Variabel für FOR Schleife</xhtml>
                    </documentation>
                  </variable>
                  <variable name="fbEdgeDetectorGelb">
                    <type>
                      <derived name="FB_EdgeDetector" />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Edge detektor 2 Mal instanzieren</xhtml>
                    </documentation>
                  </variable>
                  <variable name="fbEdgeDetectorBlau">
                    <type>
                      <derived name="FB_EdgeDetector" />
                    </type>
                  </variable>
                  <variable name="bGelbTaster">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> "Software" Taster um Edge Detektor zu testen</xhtml>
                    </documentation>
                  </variable>
                  <variable name="bBlauTaster">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="bRedLight">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> "Software" Leucthmelder</xhtml>
                    </documentation>
                  </variable>
                  <variable name="bGreenLight">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="bCommandForLights">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Steuerbefehle für die Lampen</xhtml>
                    </documentation>
                  </variable>
                  <variable name="uiTicksNumber3Herz">
                    <type>
                      <UINT />
                    </type>
                    <initialValue>
                      <simpleValue value="0" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Number of Zyklen in 1/3 Sekunde (3 Hz)</xhtml>
                    </documentation>
                  </variable>
                  <variable name="uiTicksCounter">
                    <type>
                      <UINT />
                    </type>
                    <initialValue>
                      <simpleValue value="0" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Zähler</xhtml>
                    </documentation>
                  </variable>
                  <variable name="bGelbPositivEdge">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE if positive Flanke bei gelbem Taster</xhtml>
                    </documentation>
                  </variable>
                  <variable name="rMeanVoltageValue">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Mittelwert vom Signal ***************</xhtml>
                    </documentation>
                  </variable>
                  <variable name="rMeanVoltageValueForget">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Über die letzten 100 Werten</xhtml>
                    </documentation>
                  </variable>
                  <variable name="rMeanVoltageValueForgetWithRec">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Über die letzten 100 Werten mit Forgetting factor</xhtml>
                    </documentation>
                  </variable>
                  <variable name="rLambda">
                    <type>
                      <REAL />
                    </type>
                    <initialValue>
                      <simpleValue value="0.95" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Forgetting factor</xhtml>
                    </documentation>
                  </variable>
                  <variable name="fbMeanWithRec">
                    <type>
                      <derived name="AverageCalculatorForgetBest" />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Instanzieren Funktionsblock
 Mittelwert mit rekursiven Anteil</xhtml>
                    </documentation>
                  </variable>
                  <variable name="stActStatus">
                    <type>
                      <derived name="ST_CurrentStatus" />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> Test-Variable mit Struktur</xhtml>
                    </documentation>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">// Aufruf Funktionen Addition/Division direkt vom Main
i_addRes := F_AdditionFunction(i_var1, i_var2);
i_divRes := F_DivisionFunction(i_var1, i_var2);

// Aufruf Funktionen Addition/Division direkt vom DoSomeMath
P_DoSomeMath.i_var1 := i_var1;
P_DoSomeMath.i_var2 := i_var2;
P_DoSomeMath();
i_addRes := P_DoSomeMath.i_addRes;
i_divRes := P_DoSomeMath.i_divRes;

// Teilung durch 8 -&gt; shift right 3 bits
w_divRes := SHR(w_myword, 3);

// Multiplikation mit 8 -&gt; shift left 3 bits
dw_mydword := SHL(w_myword, 3);

// Vier höchsten bits auf 1 setzen 
dw_mydword1 := dw_mydword OR 16#F0000000;

// Aufruf Funktion für RS232 Protokoll
// Auswertung vom Statuswort
st_resRsProt := F_STATUS_WORD_PROC(w_testWord);
 
// FOR Schleife um die Elemente von Array zusammen zu addieren
// bzw. zu multiplizieren
r_SummeArray := 0.0;
r_MulArray   := 1.0;
FOR i_SchleifeIterVar := 1 TO 10 DO
	r_SummeArray := r_SummeArray + arr_r_testArray[i_SchleifeIterVar];
	r_MulArray := r_MulArray * arr_r_testArray[i_SchleifeIterVar];
END_FOR


fbEdgeDetectorGelb(b_InputSignal_k := bGelbTaster);
bGelbPositivEdge := fbEdgeDetectorGelb.b_PositiveEdge;
// Alternativ, Funktionsausruf + Zuweisung Ergebnis in einem Schritt
// fbEdgeDetectorGelb(b_InputSignal_k := bGelbTaster, b_PositiveEdge =&gt; bGelbPositivEdge);
IF bGelbpositivEdge THEN
	// Hier Brekpoint setzen mit F9 um EdgeDetector zu testen
	r_MulArray := 0;
END_IF
 
fbEdgeDetectorBlau(b_InputSignal_k := bBlauTaster);

IF fbEdgeDetectorBlau.b_PositiveEdge THEN
	bCommandForLights := NOT bCommandForLights;
END_IF

IF bCommandForLights THEN
	uiTicksNumber3Herz := REAL_TO_UINT(1.0/3.0 / GVL_Constants.r_TaskTime);
	uiTicksCounter := uiTicksCounter + 1;
	IF uiTicksCounter = uiTicksNumber3Herz THEN
		uiTicksCounter := 0;	
		bRedLight := NOT bRedLight;
		bGreenLight := NOT bGreenLight;
	END_IF
END_IF

// Sensor simulieren !!
GVL_IO.intUltrasonicSensor := GVL_IO.intUltrasonicSensor + 100;
// -32768 -&gt; 10 V, 32767 -&gt; + 10 V
GVL_IO.voltageUltrasonicSensor := INT_TO_REAL(GVL_IO.intUltrasonicSensor) / 32767.0 * 10.0;

// Verschiebung nach links auf dem Buffer
ShifLeft();
// Letzte Spannung speichern
GVL_general.bufferArray[100] := GVL_IO.voltageUltrasonicSensor;

// Mittelwert
rMeanVoltageValue := AverageCalculator(GVL_general.bufferArray);
rMeanVoltageValueForget := AverageCalculatorForget(rLambda, GVL_general.bufferArray);

fbMeanWithRec(r_lambda := rLambda, 
	r_y_k := GVL_IO.voltageUltrasonicSensor,
	m_k =&gt; rMeanVoltageValueForgetWithRec); 
	

</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">PROGRAM MAIN
VAR
	// Lokale Variablen um die Funktionen
	// F_AdditionFunction und F_DivisionFunction zu testen
	i_var1   : INT;
	i_var2   : INT;
	i_addRes : INT;
	i_divRes : INT;
	
	// 16 bits
	w_myword : WORD := 16#5D7A;
	w_divRes : WORD;
	
	// 32 bits
	dw_mydword : DWORD;
	dw_mydword1 : DWORD;
	
	w_testWord : WORD;
	
	st_resRsProt : ST_STATUS_WORD_DATA;
	
	// Array von REAL, Dimension 10
	// arr_r_testArray : ARRAY[0..9] OF REAL;
	arr_r_testArray : ARRAY[1..10] OF REAL;
	
	// Variablen für FOR Schleife
	r_SummeArray : REAL;
	r_MulArray : REAL;
	
	// Variabel für FOR Schleife
	i_SchleifeIterVar : INT;
	
	// Edge detektor 2 Mal instanzieren
	fbEdgeDetectorGelb : FB_EdgeDetector;
	fbEdgeDetectorBlau : FB_EdgeDetector;
	
	// "Software" Taster um Edge Detektor zu testen
	bGelbTaster : BOOL;
	bBlauTaster : BOOL;
	
	// "Software" Leucthmelder
	bRedLight : BOOL;
	bGreenLight : BOOL;
	
	// Steuerbefehle für die Lampen
	bCommandForLights : BOOL := FALSE;
	
	// Number of Zyklen in 1/3 Sekunde (3 Hz)
	uiTicksNumber3Herz : UINT := 0;
	
	// Zähler
	uiTicksCounter : UINT := 0;
	
	// TRUE if positive Flanke bei gelbem Taster
	bGelbPositivEdge : BOOL;
	
	// Mittelwert vom Signal ***************
	rMeanVoltageValue : REAL;
	// Über die letzten 100 Werten
	rMeanVoltageValueForget : REAL;
	// Über die letzten 100 Werten mit Forgetting factor
	rMeanVoltageValueForgetWithRec : REAL;
	// Forgetting factor
	rLambda : REAL := 0.95;
	
	// Instanzieren Funktionsblock
	// Mittelwert mit rekursiven Anteil
	fbMeanWithRec : AverageCalculatorForgetBest;
	
	// Test-Variable mit Struktur
	stActStatus : ST_CurrentStatus;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>57bf95ca-260b-48c4-9e75-71f215a57d8e</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="P_DoSomeMath" pouType="program">
              <interface>
                <inputVars>
                  <variable name="i_var1">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_var2">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </inputVars>
                <outputVars>
                  <variable name="i_addRes">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="i_divRes">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </outputVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml" />
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">PROGRAM P_DoSomeMath
VAR
END_VAR
// VAR_INPUT und VAR_OUTPUT müssen vor Hand
// hinzugefügt werden!!
VAR_INPUT
	i_var1 : INT;
	i_var2 : INT;
END_VAR
VAR_OUTPUT
	i_addRes : INT;
	i_divRes : INT;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>0309d053-c44d-477c-8f8e-d9fbf85bcbfe</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="ShifLeft" pouType="function">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <localVars>
                  <variable name="iFor">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">FOR iFor := 1 TO 99 DO
	GVL_general.bufferArray[iFor] := GVL_general.bufferArray[iFor + 1];
END_FOR</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION ShifLeft : BOOL
VAR_INPUT
END_VAR
VAR
	iFor : INT;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>a43f2fd8-0248-4733-a297-f1243424b7f0</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="AverageCalculator" pouType="function">
              <interface>
                <returnType>
                  <REAL />
                </returnType>
                <inputVars>
                  <variable name="bufArr">
                    <type>
                      <array>
                        <dimension lower="1" upper="100" />
                        <baseType>
                          <REAL />
                        </baseType>
                      </array>
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="iFor">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">AverageCalculator := 0.0;
FOR iFor := 1 TO 100 DO
	AverageCalculator := AverageCalculator + bufArr[iFor];
END_FOR
AverageCalculator  := AverageCalculator / 100;</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION AverageCalculator : REAL
VAR_INPUT
	bufArr : ARRAY[1..100] OF REAL;
END_VAR
VAR
	iFor : INT;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>0f697a80-b65b-42a8-b515-f00a08d876e7</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="AverageCalculatorForget" pouType="function">
              <interface>
                <returnType>
                  <REAL />
                </returnType>
                <inputVars>
                  <variable name="rLambda">
                    <type>
                      <REAL />
                    </type>
                    <initialValue>
                      <simpleValue value="0.95" />
                    </initialValue>
                  </variable>
                  <variable name="bufArr">
                    <type>
                      <array>
                        <dimension lower="1" upper="100" />
                        <baseType>
                          <REAL />
                        </baseType>
                      </array>
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="iFor">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="rSumInter">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">AverageCalculatorForget := 0.0;
rSumInter := 0.0;
FOR iFor := 1 TO 100 DO
	AverageCalculatorForget := AverageCalculatorForget + bufArr[iFor]*EXPT(rLambda,100-iFor);
	rSumInter := rSumInter + EXPT(rLambda,100-iFor);
END_FOR
AverageCalculatorForget  := AverageCalculatorForget / rSumInter;</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION AverageCalculatorForget : REAL
VAR_INPUT
	rLambda : REAL := 0.95;
	bufArr : ARRAY[1..100] OF REAL;
END_VAR
VAR
	iFor : INT;
	rSumInter : REAL;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>145ee6f3-eb96-4c78-902d-33067c4bcf80</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="AverageCalculatorForgetBest" pouType="functionBlock">
              <interface>
                <inputVars>
                  <variable name="r_lambda">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                  <variable name="r_y_k">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                </inputVars>
                <outputVars>
                  <variable name="m_k">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                </outputVars>
                <localVars>
                  <variable name="m_k_1">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">m_k := r_lambda * m_k_1 + (1.0-r_lambda) * r_y_k;
m_k_1 := m_k;</xhtml>
                </ST>
              </body>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/interfaceasplaintext" handleUnknown="implementation">
                  <InterfaceAsPlainText>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">FUNCTION_BLOCK AverageCalculatorForgetBest
VAR_INPUT
	r_lambda : REAL;
	r_y_k : REAL;
END_VAR
VAR_OUTPUT
	m_k : REAL;
END_VAR
VAR
	m_k_1 : REAL;
END_VAR
</xhtml>
                  </InterfaceAsPlainText>
                </data>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>18bf4449-b450-45ea-9b43-74475c1408ad</ObjectId>
                </data>
              </addData>
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
            <Libraries>
              <Library Name="#Tc2_Standard" Namespace="Tc2_Standard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Tc2_Standard, * (Beckhoff Automation GmbH)" />
              <Library Name="#Tc2_System" Namespace="Tc2_System" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Tc2_System, * (Beckhoff Automation GmbH)">
                <Parameters>
                  <Parameter Name="TABLE_UPPER_BOUND" Value="15" />
                  <Parameter Name="STRING_LENGTH_EXP" Value="255" />
                  <Parameter Name="STRING_LENGTH_ADDRESS" Value="20" />
                  <Parameter Name="STRING_LENGTH_COMMENT" Value="255" />
                  <Parameter Name="STRING_LENGTH_OUTSTRING" Value="255" />
                  <Parameter Name="TABLE_SHOW_VALID_ITEMS" Value="FALSE" />
                </Parameters>
              </Library>
              <Library Name="#Tc3_Module" Namespace="Tc3_Module" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Tc3_Module, * (Beckhoff Automation GmbH)" />
              <Library Name="#System_VisuElemMeter" Namespace="VisuElemMeter" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuElemMeter, 3.5.13.0 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#System_VisuElems" Namespace="VisuElems" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuElems, 3.5.13.21 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#System_VisuElemsSpecialControls" Namespace="VisuElemsSpecialControls" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuElemsSpecialControls, 3.5.13.0 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#System_VisuElemsWinControls" Namespace="VisuElemsWinControls" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuElemsWinControls, 3.5.13.20 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#System_VisuElemTextEditor" Namespace="VisuElemTextEditor" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuElemTextEditor, 3.5.13.0 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#System_VisuNativeControl" Namespace="VisuNativeControl" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="VisuNativeControl, 3.5.13.0 (System)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <Library Name="#system_visuinputs" Namespace="visuinputs" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="visuinputs, 3.5.13.0 (system)" ResolverGuid="2717eb6a-dd07-4c66-8d8d-cacebd7b18ae" />
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                  <ObjectId>4b621c8a-e5cd-4ef8-abb2-bb8cf45ad2bf</ObjectId>
                </data>
              </addData>
            </Libraries>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>af8d59a0-7299-4d5c-b058-d75242329823</ObjectId>
          </data>
        </addData>
      </resource>
    </data>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Object Name="Aufgabe2SPS" ObjectId="af8d59a0-7299-4d5c-b058-d75242329823">
          <Object Name="Library Manager" ObjectId="4b621c8a-e5cd-4ef8-abb2-bb8cf45ad2bf" />
          <Folder Name="DUTs">
            <Object Name="ST_STATUS_WORD_DATA" ObjectId="6100a887-595c-4253-889a-be2e97bedc30" />
            <Object Name="ST_CurrentStatus" ObjectId="0c26ce45-48b3-45dd-9f3e-d64ca69228fa" />
          </Folder>
          <Object Name="PlcTask" ObjectId="b3b2532a-3bf1-487c-8bf0-864602a6006f" />
          <Folder Name="POUs">
            <Object Name="FB_EdgeDetector" ObjectId="c7b5231f-e8d0-4d6a-9062-0fbf4479b8b4" />
            <Object Name="F_AdditionFunction" ObjectId="309f8455-b043-43fc-a577-86461ee6c392" />
            <Object Name="F_DivisionFunction" ObjectId="b8f8b2c8-b15f-456f-90ce-adb05caeb8ca" />
            <Object Name="F_STATUS_WORD_PROC" ObjectId="2e7e933b-dbe1-4158-8997-44b75cd3bed0" />
            <Object Name="MAIN" ObjectId="57bf95ca-260b-48c4-9e75-71f215a57d8e" />
            <Object Name="P_DoSomeMath" ObjectId="0309d053-c44d-477c-8f8e-d9fbf85bcbfe" />
            <Object Name="ShifLeft" ObjectId="a43f2fd8-0248-4733-a297-f1243424b7f0" />
            <Object Name="AverageCalculator" ObjectId="0f697a80-b65b-42a8-b515-f00a08d876e7" />
            <Object Name="AverageCalculatorForget" ObjectId="145ee6f3-eb96-4c78-902d-33067c4bcf80" />
            <Object Name="AverageCalculatorForgetBest" ObjectId="18bf4449-b450-45ea-9b43-74475c1408ad" />
          </Folder>
          <Folder Name="GVLs">
            <Object Name="GVL_Constants" ObjectId="6a4b177b-49b8-4779-aaf4-3ef6865ef486" />
            <Object Name="GVL_IO" ObjectId="815b5ac3-0bfd-45a5-ac0e-b78d968081d8" />
            <Object Name="GVL_general" ObjectId="fdd4f0a5-029c-4650-8621-f314396a62ea" />
          </Folder>
        </Object>
      </ProjectStructure>
    </data>
  </addData>
</project>